name: Update GIST on commit

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

  workflow_dispatch:

# https://github.com/marketplace/actions/gist-sync
jobs:
  gist-sync:
    name: gist-sync
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - uses: popsiclestick/gist-sync-action@v1.2.0
        id: sync8
        with:
          auth: ${{ secrets.GIST_TOKEN }}
          gist_url: https://gist.github.com/thecloudbee/cc68fde22e1855cb7a8eddce0b6e93bb
          gist_title: 2021-01-25-playbook-kafka-cluster.yml
          github_file: thecloudbee_blog/code_snippets/2021-01-25/ansible/playbook_kafka_cluster.yml
      - uses: popsiclestick/gist-sync-action@v1.2.0
        id: sync9
        with:
          auth: ${{ secrets.GIST_TOKEN }}
          gist_url: https://gist.github.com/thecloudbee/6ec2e67d28e4f246d6ac47004762a2a5
          gist_title: 2021-01-25-ansible-execute.sh
          github_file: thecloudbee_blog/code_snippets/2021-01-25/ansible/execute.sh
      - uses: popsiclestick/gist-sync-action@v1.2.0
        id: sync10
        with:
          auth: ${{ secrets.GIST_TOKEN }}
          gist_url: https://gist.github.com/thecloudbee/0e53b158bab8aeb70c932e6b8e9e7f2b
          gist_title: 2021-01-25-ansible-hosts.yml
          github_file: thecloudbee_blog/code_snippets/2021-01-25/ansible/hosts/hosts
